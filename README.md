# The Happy Feet Website
The new [Happy Feet website](https://happyfeet.us) is a completely static website generated using [Jekyll](https://jekyllrb.com/).

### Before we begin
Make sure to pull all the changes from the github repo, as there might be multiple branches running on multiple machines.
```sh
git pull
```

### Testing on a local server
```sh
jekyll serve -w -I
```
- `-w` watches for changes and rebuilds
- `-I` does only incremental rebuilds

Run above command gets the website running at http://localhost:4000/happyfeet/
*At times, changes may not show up (eg: changes to the `_config.yml` file) with incremental builds. In cases like these, run the above command without the `-w` and `-I` flags.*

### Push to staging server on Github
We are using Github to stage our website, as Github automatically builds Jekyll pages, and version controls the code.
```sh
git add .
git commit -m "Commit message"
git push
```
The github version, which we use for staging, is here: https://lovelldies.github.io/happyfeet/

### Deploying to Firebase
The live website is hosted on [Firebase](https://firebase.google.com/). Before deploying we need to build the website.
```sh
JEKYLL_ENV=production jekyll build --baseurl ""
```
- Certain parts of the code like, Google Analytics & Disqus are disabled on the local server. `JEKYLL_ENV=production` sets the production flag and enables these lines on code on building. This is automatically set on Github pages.
- The `baseurl` is set to `""` as our live website runs directly on the `https://happyfeet.us/` domain, without the trailing `happyfeet` which we have on the local server and github pages.

Then run, to push our freshly built website to the live URL.
```sh
firebase deploy
```
We can also use to run the website locally if required, before deploying it to the firebase hosting server.
```sh
firebase deploy
```
This local version of the server can be viewed at http://localhost:5000/ . The `firebase.json` file has `"public": "_site"`. The `_site` folder is generated by Jekyll via the `build` or `serve` command.